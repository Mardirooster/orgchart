{% extends 'charts/base.html' %}
{% load static %}
{% load js %}

{% csrf_token %}

{% block body_block %}
	<body style="padding-top:100px; ! important;"> 
	<script type="text/javascript">
	var departments = [];
	{% for dict in employees_tree %}
		departments.push( "{{ dict.0 }}")
		var {{ dict.0 }} = {{ dict.1 | js}};
	{% endfor %}

	{% if department %}
		var department = "{{ department }}";
	{% endif %}
  	</script>

	<nav class="navbar navbar-inverse navbar-fixed-top bg-primary" >
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="/">Organisation Chart</a>
        </div>
        <div id="navbar" class="collapse navbar-collapse mx-auto">
          <ul class="nav navbar-nav ">
          	{% for dict in employees_tree %}
          		{% if dict.0 == department  %} 
          			<li class="active mx-auto">
          		{% else %}
          			<li>
          		{% endif %}
          		<a href="/charts/?dep={{dict.0}}"> {{ dict.2 }} </a></li>
          	{% endfor %}
          	<div class="col-sm-3 col-md-3 pull-right">
        <form class="navbar-form" role="search">
<!--         <div class="input-group">
            <input type="text" class="form-control" placeholder="Search" name="srch-term" id="srch-term">
            <div class="input-group-btn">
                <button class="btn btn-default" type="submit"><i class="glyphicon glyphicon-search"></i></button>
            </div>
        </div> -->
        </form>
        </div>
			
          </ul>

        </div><!--/.nav-collapse -->
      </div>
    </nav>

	<div class='row'>
		<div class='left col-md-10'>
			<div class="row">
				<div class="col-md-12">
				<div id="chart-container" style="height: calc(100vh - 300px);">
					<div id="chart-title" class="heading"></div>	
					
				</div>
				</div>
			</div>

			<div class="row">
				<div class="col-md-8">
				</div>
				<div class="col-md-4 col-md-offset-4">
				<div id="save-button" class="save-button">
					<div ></div>
				</div>
				</div>
			</div>
		</div>

		<div class='col-md-2'>
			<div id='info-container'>
				<div id='pic-container'></div>
				<div id='profile-container' contentEditable=true></div>
				<div id='profile-save-button'><div><div/></div>
			</div>
		</div>
		</div>
	</div>

{% endblock %}

{% block more_scripts %}

  	{% csrf_token %}
{% endblock %}

